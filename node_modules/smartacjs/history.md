2016-11-17 vic v1.5
-
- 修改:Windows默认日志路径:$(CurrentDirectory)/../log/,让开发人员调试log输出集中在一起
- 增加:redis增加findkeys方法用于模糊匹配查找keys

2016-08-29 Simon v1.3
-
- 修改:实例名默认规则(自动产生):[主机名].[程序类型]
- 修改:使用框架时,程序类型必须设定,否则无法启动
- 修改:所有日志使用stdout输出,避免双通道上下文错位问题(2016-08-29)
- 修改:文件日志默认启用状态2016-08-29
    - 增加全局配置:conf.logPath,日志记录路径(一般不设,使用默认)
    - Linux默认日志路径:/var/log/smartac/node/
    - Windows默认在日志路径:$(CurrentDirectory)log/
    - 默认日志文件名为:g_app.programType+"_$(Year4)$(Month2)$(Day2)_$(FileNumber2).log"
- 增加:makeSql系列函数增加对Date类型的支持,现在会自动转换为正确的时间格式(2016-08-26)
- 修改:sc.deepCopy增加对Date类型的支持,如果遇到Date类型,会自动创建新日期对象(2016-08-26)
- 增加:全局数据统计相关内容(2016-08-11)
- 增加:RabbitMQ,MySQL使用情况统计数据(2016-8-9)
	- 配合sc_system公共实现程序内部监控功能
- 增加:内存使用监控功能(2016-07-21)
	- 使用-dump参数启动进程,则会自动使用默认参数启动内存检查功能
	- 默认内存监控每5分钟执行一次,内存超过30%会自动记录dump文件,内存超过50%会终止进程,文件路径默认为"当前目录程序类型_时间_进程编号.heapsnapshot"(默认参数以后根据使用经验可能会做调整)
	- 也可以使用sc.isRecordDump=true强行打开或关闭记录功能(必须在runMain调用以前设定)
	- 可以使用sc.recordDumpFile主动记录dump文件

- 修改:调整MySQL数据库连接池获取方法

       - 如果pool上的连接数用光，再调用getConnection方法时，会有错误提示。
       - 调用getConnection方法加了个timeout参数，用与设置获取连接的超时时间，不传则默认10s，即10s内如果还没成功获取连接，会返回错误
2016-07-13 Simon v1.2
-
- Add:redis操作类incr方法,用于计数器递增
- Fix:SQLMaker系列条件语句,and改为大写AND
- Fix:RabbitMQ发布消息时通过Promise返回
- Fix:sc.assert方法条件判断反了
- add:redis中set方法添加timeout参数,与setex方法行为一致
- Changed:修改启动逻辑

		单核模式:先调用main,后调用app.master
		多核模式:主仅调用app.master,子仅调用main
- Changed:修改子进程启动方式
		- 每秒启动一个子进程,避免启动瞬间资源争抢
		- 修改子进程索引工作方式,通过环境变量传递给子进程

2016-05-04 Kay v1.1
-
- 修改:scMysql.js中makeSQL方法，字符串最后一位是$需要再添加一个$去转译


2016-04-19 Simon v1.1
-
- 修改:日志工作方式,不使用IPC通道,自建TCP连接传送日志到主进程
- 添加:sc.isCluster 用于判断当前是否集群模式启动
	- 命令行添加"-s"启用单核模式(禁止集群方式)
- 添加:sc.isTest 用于判断是否进行测试
	- 命令行中添加"--test"启用测试模式
- 修改:sc.isDebug()为sc.isDebug 用于判断当前是否调试模式
- 添加:sc.isMaster 判断当前是否集群模式的主进程
- 添加:sc.numCPUs 获取当前cpu核数(测试模式CUP核数始终为1)
- 添加:sc.workIndex 获取当前worker索引,索引取值为0~sc.numCPUs-2
	- worker_index可以稳定的标识工作进程(重启后不变),可以利用此特性进行单进程响应等功能
- 添加:sc.getWorker(index) 方法获取工作进程句柄
- 修改:框架初始化不在第一次调用sc.app()时进行,改在调用sc.runMain()时进行
- 添加:添加全局异常捕获(非调试状态),错误进行Error日志输出,不退出进程
- 添加:进程错误捕获,错误进行Error日志输出,不退出进程
- 修改:集群启动数量控制
	- 如果仅有1~2个CPU,则自动关闭集群功能
	- CPU超过2个,则启动CPU个数-1个工作进程,主进程不工作
- 添加:集群模式主进程会主动调用app.master()方法(如果提供)
